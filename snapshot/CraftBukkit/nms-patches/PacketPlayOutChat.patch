--- a/net/minecraft/server/PacketPlayOutChat.java
+++ b/net/minecraft/server/PacketPlayOutChat.java
@@ -5,27 +5,34 @@
 public class PacketPlayOutChat implements Packet<PacketListenerPlayOut> {
 
     private IChatBaseComponent a;
-    private ChatMessageType b;
+    public net.md_5.bungee.api.chat.BaseComponent[] components; // Spigot
+    private byte b;
 
     public PacketPlayOutChat() {}
 
     public PacketPlayOutChat(IChatBaseComponent ichatbasecomponent) {
-        this(ichatbasecomponent, ChatMessageType.SYSTEM);
+        this(ichatbasecomponent, (byte) 1);
     }
 
-    public PacketPlayOutChat(IChatBaseComponent ichatbasecomponent, ChatMessageType chatmessagetype) {
+    public PacketPlayOutChat(IChatBaseComponent ichatbasecomponent, byte b0) {
         this.a = ichatbasecomponent;
-        this.b = chatmessagetype;
+        this.b = b0;
     }
 
     public void a(PacketDataSerializer packetdataserializer) throws IOException {
         this.a = packetdataserializer.f();
-        this.b = ChatMessageType.a(packetdataserializer.readByte());
+        this.b = packetdataserializer.readByte();
     }
 
     public void b(PacketDataSerializer packetdataserializer) throws IOException {
-        packetdataserializer.a(this.a);
-        packetdataserializer.writeByte(this.b.a());
+        // Spigot start
+        if (components != null) {
+            packetdataserializer.a(net.md_5.bungee.chat.ComponentSerializer.toString(components));
+        } else {
+            packetdataserializer.a(this.a);
+        }
+        // Spigot end
+        packetdataserializer.writeByte(this.b);
     }
 
     public void a(PacketListenerPlayOut packetlistenerplayout) {
@@ -33,10 +40,10 @@
     }
 
     public boolean b() {
-        return this.b == ChatMessageType.SYSTEM || this.b == ChatMessageType.GAME_INFO;
+        return this.b == 1 || this.b == 2;
     }
 
-    public ChatMessageType c() {
+    public byte c() {
         return this.b;
     }
 }
