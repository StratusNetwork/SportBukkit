--- a/net/minecraft/server/VillageSiege.java
+++ b/net/minecraft/server/VillageSiege.java
@@ -21,7 +21,7 @@
     }
 
     public void a() {
-        if (this.a.D()) {
+        if (this.a.B()) {
             this.c = 0;
         } else if (this.c != 2) {
             if (this.c == 0) {
@@ -71,7 +71,7 @@
             EntityHuman entityhuman = (EntityHuman) iterator.next();
 
             if (!entityhuman.isSpectator()) {
-                this.f = this.a.ak().getClosestVillage(new BlockPosition(entityhuman), 1);
+                this.f = this.a.ai().getClosestVillage(new BlockPosition(entityhuman), 1);
                 if (this.f != null && this.f.c() >= 10 && this.f.d() >= 20 && this.f.e() >= 20) {
                     BlockPosition blockposition = this.f.a();
                     float f = (float) this.f.b();
@@ -86,7 +86,7 @@
                             this.h = blockposition.getY();
                             this.i = blockposition.getZ() + (int) ((double) (MathHelper.sin(f1) * f) * 0.9D);
                             flag = false;
-                            Iterator iterator1 = this.a.ak().getVillages().iterator();
+                            Iterator iterator1 = this.a.ai().getVillages().iterator();
 
                             while (iterator1.hasNext()) {
                                 Village village = (Village) iterator1.next();
@@ -140,7 +140,7 @@
             }
 
             entityzombie.setPositionRotation(vec3d.x, vec3d.y, vec3d.z, this.a.random.nextFloat() * 360.0F, 0.0F);
-            this.a.addEntity(entityzombie);
+            this.a.addEntity(entityzombie, org.bukkit.event.entity.CreatureSpawnEvent.SpawnReason.VILLAGE_INVASION); // CraftBukkit
             BlockPosition blockposition = this.f.a();
 
             entityzombie.a(blockposition, this.f.b());
